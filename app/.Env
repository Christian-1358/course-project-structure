<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mestre das Milhas | Plataforma Elite</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #0a0b0d; --panel: #161b22; --sidebar: #0d1117; --text: #e6edf3;
            --text-muted: #8b949e; --accent: #a855f7; --border: #30363d; --success: #238636;
        }
        [data-theme="light"] {
            --bg: #f8f9fa; --panel: #ffffff; --sidebar: #ffffff; --text: #1c1d1f;
            --text-muted: #6a6f73; --accent: #a855f7; --border: #d1d7dc; --success: #2d8640;
        }
        * { box-sizing: border-box; transition: background 0.3s, color 0.3s; }
        body { margin: 0; font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); height: 100vh; display: flex; flex-direction: column; overflow: hidden; }
        
        header { 
            height: 60px; display: flex; align-items: center; justify-content: space-between; 
            padding: 0 24px; background: var(--sidebar); border-bottom: 1px solid var(--border); z-index: 100; 
        }
        .logo { font-weight: 800; font-size: 1.1rem; }
        .logo span { color: var(--accent); }

        main { display: flex; flex: 1; overflow: hidden; position: relative; }

        /* PLAYER AREA */
        .content-area { flex: 1; overflow-y: auto; background: var(--bg); position: relative; }
        .video-container { width: 100%; background: #000; aspect-ratio: 16/9; position: relative; }
        .video-container iframe { width: 100%; height: 100%; border: none; }
        
        .toggle-sidebar-btn {
            position: absolute; right: 0; top: 50%; transform: translateY(-50%);
            background: var(--accent); color: white; border: none; padding: 15px 8px;
            cursor: pointer; border-radius: 8px 0 0 8px; z-index: 50;
        }

        .lesson-body { padding: 30px 40px; max-width: 1000px; margin-bottom: 50px; }
        .nav-controls { display: flex; align-items: center; gap: 15px; margin: 25px 0; }
        
        /* SIDEBAR */
        .sidebar { width: 380px; background: var(--sidebar); border-left: 1px solid var(--border); display: flex; flex-direction: column; }
        .sidebar.closed { width: 0; overflow: hidden; border-left: none; }
        .sidebar-search { padding: 15px; border-bottom: 1px solid var(--border); }
        .sidebar-search input { width: 100%; padding: 10px; border-radius: 6px; border: 1px solid var(--border); background: var(--panel); color: var(--text); }
        
        .modules-wrapper { flex: 1; overflow-y: auto; }
        .module-item { border-bottom: 1px solid var(--border); }
        .module-btn { width: 100%; padding: 16px 20px; background: var(--panel); border: none; color: var(--text); display: flex; justify-content: space-between; cursor: pointer; font-size: 14px; font-weight: 600; }
        .lessons-list { display: none; }
        .module-item.open .lessons-list { display: block; }

        .lesson-item { padding: 15px 20px; display: flex; gap: 12px; cursor: pointer; font-size: 13px; border-bottom: 1px solid var(--border); align-items: center; }
        .lesson-item.active { background: var(--panel); border-left: 4px solid var(--accent); }
        .lesson-item.completed span { color: var(--text-muted); text-decoration: line-through; }

        /* QUIZ MODAL */
        #quizModal { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 90%; max-width: 500px; background: var(--panel); border: 1px solid var(--border); border-radius: 12px; padding: 30px; z-index: 1000; box-shadow: 0 10px 50px rgba(0,0,0,0.5); }
        .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 999; }

        button { padding: 10px 18px; border-radius: 6px; cursor: pointer; border: 1px solid var(--border); background: var(--panel); color: var(--text); font-weight: 600; }
        .primary-btn { background: var(--accent); color: white; border: none; }
    </style>
</head>
<body data-theme="dark">

<header>
    <div class="logo">‚úàÔ∏è MESTRE DAS <span>MILHAS</span></div>
    <div style="display: flex; gap: 15px; align-items: center;">
        <button onclick="toggleTheme()" style="font-size: 11px;">üåì TEMA</button>
        <div id="prog-txt" style="font-size: 12px; background: var(--panel); padding: 5px 15px; border-radius: 20px; border: 1px solid var(--border);">0%</div>
    </div>
</header>

<main>
    <div class="content-area">
        <div class="video-container">
            <iframe id="mainPlayer" src="" allow="autoplay; fullscreen"></iframe>
            <button class="toggle-sidebar-btn" onclick="toggleSidebar()">‚ùÆ</button>
        </div>
        
        <div class="lesson-body">
            <h2 id="currentTitle">...</h2>
            <div class="nav-controls">
                <button onclick="openQuiz()" class="primary-btn">üìù Teste o M√≥dulo</button>
                <button onclick="changeLesson(-1)" style="margin-left:auto">‚ùÆ Anterior</button>
                <button class="primary-btn" onclick="changeLesson(1)">Pr√≥xima Aula ‚ùØ</button>
            </div>
            <p id="currentDesc" style="color: var(--text-muted);"></p>

            <div style="margin-top: 40px; border-top: 1px solid var(--border); padding-top: 20px;">
                <h3>Anota√ß√µes da Aula</h3>
                <textarea id="noteField" style="width:100%; height:100px; background:var(--panel); border:1px solid var(--border); color:white; padding:15px; border-radius:8px; resize:none;" oninput="saveNote()"></textarea>
            </div>
        </div>
    </div>

    <div class="sidebar" id="sidebar">
        <div class="sidebar-search">
            <input type="text" id="searchInput" placeholder="Buscar aula..." oninput="searchLessons()">
        </div>
        <div class="modules-wrapper" id="moduleContainer"></div>
    </div>
</main>

<div class="overlay" id="overlay" onclick="closeQuiz()"></div>
<div id="quizModal">
    <h3 id="quizTitle">Desafio de M√≥dulo</h3>
    <div id="quizContent">
        <p>Qual o conceito b√°sico de CPM no mundo das milhas?</p>
        <button onclick="checkAnswer(true)" style="width:100%; text-align:left; margin-bottom:10px;">A) Custo Por Milheiro</button>
        <button onclick="checkAnswer(false)" style="width:100%; text-align:left;">B) Cr√©dito Para Milhas</button>
    </div>
    <button onclick="closeQuiz()" style="margin-top:20px; width:100%;">Fechar</button>
</div>

<script>
    const course = [
        { name: "M√≥dulo 1: Fundamentos", lessons: [
            {t: "Boas Vindas", d: "In√≠cio da jornada.", v: "3r6Q9tCzX4k"},
            {t: "O que s√£o Milhas", d: "Conceito base.", v: "8pTEmbeENF4"},
            {t: "Livelo vs Esfera", d: "Comparativo bancos.", v: "Z9z8Z2f3nGQ"},
            {t: "Cias A√©reas", d: "Onde usar milhas.", v: "yJz8QyYw7l8"},
            {t: "CPM na pr√°tica", d: "Calculando custos.", v: "p7HKvqRI_Bo"},
            {t: "Gloss√°rio Milheiro", d: "Dicion√°rio t√©cnico.", v: "dZ9gY8JwqfE"},
            {t: "Alertas", d: "N√£o perca promos.", v: "5Y3G6a2Z8sU"}
        ]},
        { name: "M√≥dulo 2: Cart√µes", lessons: [
            {t: "Ranking Black", d: "Melhores cart√µes.", v: "Qv2L8g1m3kM"},
            {t: "Isen√ß√£o Anuidade", d: "Como n√£o pagar.", v: "7J9x8w3QX2M"},
            {t: "Aceleradores", d: "Multiplicando.", v: "1b9QX5M0H8I"},
            {t: "Cooperativas", d: "O poder do Sicredi.", v: "L8z1p9Y0QH4"},
            {t: "Salas VIP", d: "Conforto em aeroportos.", v: "C8QZ3y9mF4s"},
            {t: "Spread 0", d: "Compras no exterior.", v: "9X3ZLkQ8P2s"},
            {t: "Seguros Cart√£o", d: "Benef√≠cios extras.", v: "M8LZ9Q2KX1A"},
            {t: "Upgrade", d: "Subindo de n√≠vel.", v: "wZ8L9Ck3m0E"}
        ]},
        { name: "M√≥dulo 3: Ac√∫mulo", lessons: [
            {t: "Promo 10x1", d: "Compras bonificadas.", v: "P9Zk3L8QX4s"},
            {t: "Parceiros Varejo", d: "Amazon e Magalu.", v: "Q9ZL2X8M3F4"},
            {t: "Transfer√™ncia 100%", d: "Momento de agir.", v: "dZ9gY8JwqfE"},
            {t: "Carrinho Livelo", d: "Comprando pontos.", v: "3r6Q9tCzX4k"},
            {t: "Clube Smiles", d: "Estrat√©gia GOL.", v: "8pTEmbeENF4"},
            {t: "Postos Combust√≠vel", d: "Milhas no tanque.", v: "Z9z8Z2f3nGQ"},
            {t: "Datas Sazonais", d: "Black Friday.", v: "yJz8QyYw7l8"},
            {t: "Giro de Cart√£o", d: "Pagando boletos.", v: "p7HKvqRI_Bo"}
        ]},
        { name: "M√≥dulo 4: Emiss√µes", lessons: [
            {t: "Tabela Fixa", d: "Pre√ßo fixo voos.", v: "5Y3G6a2Z8sU"},
            {t: "Busca Executiva", d: "Voando com luxo.", v: "Qv2L8g1m3kM"},
            {t: "Iberia Plus", d: "Voe para Europa.", v: "7J9x8w3QX2M"},
            {t: "Stopover", d: "2 destinos em 1.", v: "1b9QX5M0H8I"},
            {t: "Regra CPF", d: "Seguran√ßa conta.", v: "L8z1p9Y0QH4"},
            {t: "Emiss√£o EUA", d: "Melhores rotas.", v: "C8QZ3y9mF4s"},
            {t: "Taxas Combust√≠vel", d: "Evitando custos.", v: "9X3ZLkQ8P2s"},
            {t: "Cancelamentos", d: "Seus direitos.", v: "M8LZ9Q2KX1A"}
        ]},
        { name: "M√≥dulo 5: Lucratividade", lessons: [
            {t: "Venda Hotmilhas", d: "Como funciona.", v: "wZ8L9Ck3m0E"},
            {t: "Venda Particular", d: "Lucro m√°ximo.", v: "P9Zk3L8QX4s"},
            {t: "Gest√£o CPFs", d: "M√∫ltiplas contas.", v: "Q9ZL2X8M3F4"},
            {t: "IR sobre Milhas", d: "Fique em dia.", v: "dZ9gY8JwqfE"},
            {t: "Ag√™ncia Digital", d: "Venda passagens.", v: "3r6Q9tCzX4k"},
            {t: "Fluxo de Caixa", d: "Gest√£o financeira.", v: "8pTEmbeENF4"},
            {t: "Certifica√ß√£o", d: "Conclus√£o curso.", v: "Z9z8Z2f3nGQ"}
        ]}
    ]

    let current = { m: 0, l: 0 };
    let completed = JSON.parse(localStorage.getItem('mm_c')) || [];
    let notes = JSON.parse(localStorage.getItem('mm_n')) || {};

    function init() {
        const container = document.getElementById('moduleContainer');
        course.forEach((mod, mIdx) => {
            const div = document.createElement('div');
            div.className = `module-item ${mIdx === 0 ? 'open' : ''}`;
            div.innerHTML = `
                <button class="module-btn" onclick="this.parentElement.classList.toggle('open')">${mod.name} <span>‚ñº</span></button>
                <div class="lessons-list">${mod.lessons.map((les, lIdx) => `
                    <div class="lesson-item ${completed.includes(les.v) ? 'completed' : ''}" id="les-${les.v}" data-title="${les.t.toLowerCase()}" onclick="play(${mIdx}, ${lIdx})">
                        <input type="checkbox" ${completed.includes(les.v) ? 'checked' : ''} onclick="event.stopPropagation(); toggle('${les.v}')">
                        <span>${lIdx+1}. ${les.t}</span>
                    </div>`).join('')}</div>`;
            container.appendChild(div);
        });
        play(0,0); updateProg();
    }

    function play(m, l) {
        current = { m, l };
        const les = course[m].lessons[l];
        document.getElementById('mainPlayer').src = `https://www.youtube.com/embed/${les.v}?autoplay=1`;
        document.getElementById('currentTitle').innerText = les.t;
        document.getElementById('currentDesc').innerText = les.d;
        document.querySelectorAll('.lesson-item').forEach(e => e.classList.remove('active'));
        document.getElementById(`les-${les.v}`).classList.add('active');
        document.getElementById('noteField').value = notes[les.v] || "";
    }

    function toggle(id) {
        completed.includes(id) ? completed = completed.filter(i => i !== id) : completed.push(id);
        localStorage.setItem('mm_c', JSON.stringify(completed));
        document.getElementById(`les-${id}`).classList.toggle('completed');
        updateProg();
    }

    function updateProg() {
        const total = course.reduce((acc, m) => acc + m.lessons.length, 0);
        const p = Math.round((completed.length / total) * 100);
        document.getElementById('prog-txt').innerText = `${p}% Conclu√≠do`;
    }

    function searchLessons() {
        const q = document.getElementById('searchInput').value.toLowerCase();
        document.querySelectorAll('.lesson-item').forEach(i => {
            i.style.display = i.getAttribute('data-title').includes(q) ? 'flex' : 'none';
        });
    }

    function openQuiz() { 
        document.getElementById('quizModal').style.display = 'block';
        document.getElementById('overlay').style.display = 'block';
        document.getElementById('quizTitle').innerText = `Desafio: ${course[current.m].name}`;
    }
    function closeQuiz() { 
        document.getElementById('quizModal').style.display = 'none';
        document.getElementById('overlay').style.display = 'none';
    }
    function checkAnswer(isCorrect) {
        alert(isCorrect ? "Correto! Voc√™ est√° dominando o conte√∫do." : "Ops! Quase l√°. Revise as aulas do m√≥dulo.");
        closeQuiz();
    }

    function saveNote() {
        const id = course[current.m].lessons[current.l].v;
        notes[id] = document.getElementById('noteField').value;
        localStorage.setItem('mm_n', JSON.stringify(notes));
    }

    function toggleTheme() {
        const b = document.body;
        b.setAttribute('data-theme', b.getAttribute('data-theme') === 'dark' ? 'light' : 'dark');
    }

    function toggleSidebar() {
        const sb = document.getElementById('sidebar');
        sb.classList.toggle('closed');
        document.querySelector('.toggle-sidebar-btn').innerText = sb.classList.contains('closed') ? '‚ùØ' : '‚ùÆ';
    }

    function changeLesson(s) {
        let n = current.l + s;
        if(course[current.m].lessons[n]) play(current.m, n);
    }

    init();
</script>
</body>
</html>